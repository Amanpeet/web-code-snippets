<!-- needs jquery and bootstrap -->

<div class="parallax-slider">
  <div class="slider-wrapper">
    <div class="slide slide1 slide-active" style="background-image: url('img/slides/slide1.jpg')">
      <div class="content">
        <div class="container">
          <div class="caption">
            <h2>Caption</h2>
          </div>
        </div>
      </div>
    </div>
    <div class="slide slide2" style="background-image: url('img/slides/slide2.jpg')">
      <div class="content">
        <div class="container">
          <div class="caption">
            <h2>Caption</h2>
          </div>
        </div>
      </div>
    </div>
    <div class="slide slide3" style="background-image: url('img/slides/slide3.jpg')">
      <div class="content">
        <div class="container">
          <div class="caption">
            <h2>Caption</h2>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="slide-indicator">
    <ol>
      <li class="active"></li>
      <li></li>
      <li></li>
    </ol>
  </div>
</div>

<style>
/* parallax */
.parallax-slider {
  position: relative;
}

.parallax-slider .slider-wrapper {
  white-space: nowrap;
  overflow: hidden;
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
}

.parallax-slider .slide {
  background: #000;
  background-size: cover;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-position: top center;
  display: inline-block;
  width: 100%;
  height: 700px;
  flex-shrink: 0;
  transition: 0.9s ease-in-out transform;
  backface-visibility: hidden;
}

.parallax-slider .slide-indicator {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translatex(-50%);
}
.parallax-slider .slide-indicator ol {
  display: inline-block;
}
.parallax-slider .slide-indicator li {
  display: inline-block;
  height: 12px;
  width: 12px;
  background: #fff;
  border-radius: 50%;
  cursor: pointer;
  transition: 0.2s ease-in-out;
  margin: 5px 3px;
}

.parallax-slider .slide-indicator li:hover {
  background: #f01e3f;
}

.parallax-slider .slide-indicator li.active {
  background: #f01e3f;
}

.parallax-slider .slide::before {
  content: '';
  display: inline-block;
  height: 50%;
}

.parallax-slider .content {
  display: inline-block;
  width: 100%;
  max-height: 100%;
  vertical-align: middle;
  white-space: normal;
  color: #fff;
  transform: translate(-5px);
}

.parallax-slider .caption {
  padding: 20px;
  transition: 0.4s;
  transition-delay: 0.8s;
  opacity: 0;
  transform: translatey(200%);
}

.parallax-slider .caption h2 {
  font-size: 60px;
  font-weight: 700;
  text-shadow: 0 2px 2px rgba(0,0,0,0.6);
}

.parallax-slider .slide-active .caption {
  transform: translatey(0);
  opacity: 1;
}
</style>
<script>
  $(document).ready(function() {
    console.log('homepage scripts initilized.');
    
    /* bootstrap slider */
    var slideStart;
    function startSlide() {
      slideStart = setInterval(slideShow, 20000);
    };
    function slideShow() {
      var slideCurrent = $(".slide-active");
      var slideNext = slideCurrent.next();
      var dotCurrent = $("li.active");
      var dotNext = dotCurrent.next();
      if (slideNext.length == 0) {
        slideNext = $(".slide").first();
        dotNext = $(".slide-indicator li").first();
      }
      var slideIndex = slideNext.index();
      $('.slide').css({
        'transform': 'translate(-' + (slideIndex) * 100 + '%)'
      });
      $('.slide').removeClass('slide-active');
      slideNext.addClass('slide-active');
      var captionNext = slideNext.find(".caption");
      $('.slide-indicator li').removeClass('active');
      dotNext.addClass('active');
    };
    function parallaxX() {
      var scrollTop = window.pageYOffset;
      $(window).on("scroll resize", function() {
        scrollTop = window.pageYOffset;
      });
      $(".slide").each(function() {
        var parallaxImage = $(this);
        var parallaxOffset = parallaxImage.offset().top;
        var yPos;
        var coords;
        $(window).on("scroll resize", function() {
          yPos = -(parallaxOffset - scrollTop) / 2;
          coords = '50% ' + yPos + 'px';
          parallaxImage.css({
            backgroundPosition: coords
          });
        });
      });
    };
    $('.slide-indicator li').on("click", function() {
      clearInterval(slideStart);
      var goToSlide = $(this).index();
      $('.slide-indicator li').removeClass('active');
      $('.slide').removeClass('slide-active');
      $('.slide').eq(goToSlide).addClass('slide-active');
      $(this).addClass('active');
      $('.slide').css({
        'transform': 'translate(-' + (goToSlide) * 100 + '%)'
      });
      startSlide();
    });
    startSlide();
    parallaxX();
    /* bootstrap slider */

  });

  </script>